"use strict";(self.webpackChunkuse_docusaurus_github_io=self.webpackChunkuse_docusaurus_github_io||[]).push([[9502],{846:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>w,contentTitle:()=>b,default:()=>N,frontMatter:()=>f,metadata:()=>t,toc:()=>y});const t=JSON.parse('{"id":"ladle/implement-preview","title":"Resizable Preview","description":"Ladle helps in preview of components. If you are building a component library and you want help showing previews of components, Ladle can help you.","source":"@site/docs/ladle/implement-preview.mdx","sourceDirName":"ladle","slug":"/ladle/implement-preview","permalink":"/docs/ladle/implement-preview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ladle/implement-preview.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docSidebar","previous":{"title":"Integrate Ladle","permalink":"/docs/ladle/integrate-ladle"}}');var s=r(4848),a=r(8453),i=r(6540),l=r(4164),o=r(8504),d=r(3295),c=r(3296);let m={none:"",md:"p-0"};function g(e){let{as:n="div",story:r,height:t,iframePointerEvents:a,style:i,padding:d,p:c="md",className:g,containerClassName:u,html:p,children:h,hint:v,hintClassName:f,lightOnly:b=!1}=e,w=d??c,y=m[w];const x=(e=>`/ladle/?story=${e}&mode=preview`)(r);if(void 0===y)throw Error(`Invalid padding value: ${JSON.stringify(w)}`);return(0,s.jsx)("div",{className:u,children:(0,s.jsxs)(n,{style:i,className:(0,l.A)("not-prose relative bg-slate-50 rounded-xl overflow-hidden",!b&&"dark:bg-slate-800/25"),children:[(0,s.jsx)("div",{style:{backgroundPosition:"10px 10px"},className:(0,l.A)("absolute inset-0 bg-grid-slate-100 [mask-image:linear-gradient(0deg,#fff,rgba(255,255,255,0.6))]",!b&&"dark:bg-grid-slate-700/25 dark:[mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.5))]")}),(0,s.jsx)("div",{className:(0,l.A)("relative border rounded-xl border-gray-200 border-solid dark:border-gray-700 !overflow-hidden",y,g),children:(0,s.jsx)(o.P.iframe,{className:"w-full",src:x,height:t,allow:"cross-origin-isolated",style:{pointerEvents:a}})}),(0,s.jsx)("div",{className:(0,l.A)("absolute inset-0 pointer-events-none border border-black/5",!b&&"dark:border-white/5")})]})})}const u=e=>{let{story:n,initialWidth:r=800,height:t=720}=e,a=(0,i.useRef)(),l=(0,d.d)(0),m=(0,i.useRef)(),u=(0,i.useRef)(),p=(0,d.d)("auto");return(0,i.useEffect)((()=>{const e=new window.ResizeObserver((()=>{l.set(0)}));return e.observe(a.current),()=>{e.disconnect()}}),[]),(0,i.useEffect)((()=>{u.current.onselectstart=()=>!1}),[]),(0,s.jsxs)("div",{ref:a,className:"relative twp",children:[(0,s.jsx)(g,{as:o.P.div,style:{marginRight:(0,c.G)(l,(e=>-e))},story:n,height:t,iframePointerEvents:p}),(0,s.jsx)("div",{ref:m,className:"absolute inset-y-0 right-[-1.375rem] left-80 ml-4 pointer-events-none",children:(0,s.jsx)(o.P.div,{ref:u,drag:"x",_dragX:l,dragMomentum:!1,dragElastic:0,dragConstraints:m,className:"absolute right-0 inset-y-0 hidden p-3 pointer-events-auto  md:block cursor-ew-resize",style:{x:l},onDragStart:()=>{document.documentElement.classList.add("dragging-ew"),p.set("none")},onDragEnd:()=>{document.documentElement.classList.remove("dragging-ew"),p.set("auto")},children:(0,s.jsx)("div",{className:"absolute top-1/2 w-1.5 h-8 bg-slate-500/60 rounded-full -translate-x-1/2 left-1/2",style:{transform:"translateX(-3px)"}})})})]})},p='"use client";\n\nimport React, { useState } from "react";\nimport clsx from "clsx";\nimport { motion, useTransform, useMotionValue } from "framer-motion";\nimport { useEffect, useRef } from "react";\n\nlet paddingMap = { none: "", md: "p-0" };\n\nconst getLadleUrl = (story) => {\n  const isDevelopment = process.env.NODE_ENV === "development";\n  if (isDevelopment) {\n    return `http://localhost:61000/ladle?story=${story}&mode=preview`;\n  }\n  return `/ladle/?story=${story}&mode=preview`;\n};\n\nfunction Well({\n  as: Component = "div",\n  story,\n  height,\n  iframePointerEvents,\n  style,\n  padding,\n  p = "md",\n  className,\n  containerClassName,\n  html,\n  children,\n  hint,\n  hintClassName,\n  lightOnly = false,\n}) {\n  let paddingKey = padding ?? p;\n  let paddingClassName = paddingMap[paddingKey];\n  const iframeUrl = getLadleUrl(story);\n\n  if (paddingClassName === undefined) {\n    throw Error(`Invalid padding value: ${JSON.stringify(paddingKey)}`);\n  }\n\n  return (\n    <div className={containerClassName}>\n      <Component\n        style={style}\n        className={clsx(\n          "not-prose relative bg-slate-50 rounded-xl overflow-hidden",\n          !lightOnly && "dark:bg-slate-800/25"\n        )}\n      >\n        <div\n          style={{ backgroundPosition: "10px 10px" }}\n          className={clsx(\n            "absolute inset-0 bg-grid-slate-100 [mask-image:linear-gradient(0deg,#fff,rgba(255,255,255,0.6))]",\n            !lightOnly &&\n              "dark:bg-grid-slate-700/25 dark:[mask-image:linear-gradient(0deg,rgba(255,255,255,0.1),rgba(255,255,255,0.5))]"\n          )}\n        />\n        <div\n          className={clsx(\n            "relative border rounded-xl border-gray-200 border-solid dark:border-gray-700 !overflow-hidden",\n            paddingClassName,\n            className\n          )}\n        >\n          <motion.iframe\n            // src={`/ladle/?mode=preview&story=${story}`}\n            className="w-full"\n            src={iframeUrl}\n            height={height}\n            allow="cross-origin-isolated"\n            style={{ pointerEvents: iframePointerEvents }}\n          />\n        </div>\n\n        <div\n          className={clsx(\n            "absolute inset-0 pointer-events-none border border-black/5",\n            !lightOnly && "dark:border-white/5"\n          )}\n        />\n      </Component>\n    </div>\n  );\n}\n\nconst ResizableLadlePreview = ({ story, initialWidth = 800, height = 720 }) => {\n  let containerRef = useRef();\n  let x = useMotionValue(0);\n  let constraintsRef = useRef();\n  let handleRef = useRef();\n  let iframePointerEvents = useMotionValue("auto");\n\n  useEffect(() => {\n    const observer = new window.ResizeObserver(() => {\n      x.set(0);\n    });\n    observer.observe(containerRef.current);\n    return () => {\n      observer.disconnect();\n    };\n  }, []);\n\n  useEffect(() => {\n    handleRef.current.onselectstart = () => false;\n  }, []);\n\n  return (\n    <div ref={containerRef} className="relative twp">\n      {/* <iframe\n        src={`/ladle/?mode=preview&story=${story}`}\n        className="w-full border border-gray-200 rounded-l"\n        height="400"\n      /> */}\n\n      <Well\n        as={motion.div}\n        style={{ marginRight: useTransform(x, (x) => -x) }}\n        story={story}\n        height={height}\n        iframePointerEvents={iframePointerEvents}\n      />\n\n      <div\n        ref={constraintsRef}\n        className="absolute inset-y-0 right-[-1.375rem] left-80 ml-4 pointer-events-none"\n      >\n        <motion.div\n          ref={handleRef}\n          drag="x"\n          _dragX={x}\n          dragMomentum={false}\n          dragElastic={0}\n          dragConstraints={constraintsRef}\n          className="absolute right-0 inset-y-0 hidden p-3 pointer-events-auto  md:block cursor-ew-resize"\n          style={{ x }}\n          onDragStart={() => {\n            document.documentElement.classList.add("dragging-ew");\n            iframePointerEvents.set("none");\n          }}\n          onDragEnd={() => {\n            document.documentElement.classList.remove("dragging-ew");\n            iframePointerEvents.set("auto");\n          }}\n        >\n          <div\n            className="absolute top-1/2 w-1.5 h-8 bg-slate-500/60 rounded-full -translate-x-1/2 left-1/2"\n            style={{\n              transform: "translateX(-3px)",\n            }}\n          />\n        </motion.div>\n      </div>\n    </div>\n  );\n};\n\nexport default ResizableLadlePreview;\n',h='export const World = () => (\n  <p className="bg-red-200 md:bg-blue-200 m-6 p-6">Hello World</p>\n);\n';var v=r(1432);const f={sidebar_position:2},b="Resizable Preview",w={},y=[{value:"Add ResizableLadlePreview.tsx",id:"add-resizableladlepreviewtsx",level:3},{value:"Add Hello World Story",id:"add-hello-world-story",level:3},{value:"Example Story with Preview",id:"example-story-with-preview",level:3}];function x(e){const n={h1:"h1",h3:"h3",header:"header",p:"p",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"resizable-preview",children:"Resizable Preview"})}),"\n",(0,s.jsx)(n.p,{children:"Ladle helps in preview of components. If you are building a component library and you want help showing previews of components, Ladle can help you."}),"\n",(0,s.jsx)(n.h3,{id:"add-resizableladlepreviewtsx",children:"Add ResizableLadlePreview.tsx"}),"\n",(0,s.jsx)(v.A,{title:"src/components/ResizableLadlePreview.tsx",language:"tsx",children:p}),"\n",(0,s.jsx)(n.h3,{id:"add-hello-world-story",children:"Add Hello World Story"}),"\n",(0,s.jsx)(v.A,{title:"src/stories/hello.stories.tsx",language:"tsx",children:h}),"\n",(0,s.jsx)(n.h3,{id:"example-story-with-preview",children:"Example Story with Preview"}),"\n",(0,s.jsx)(n.p,{children:"The components loads ladle preview of a story in an iframe which is resizable."}),"\n",(0,s.jsx)(u,{story:"hello--world",initialHeight:50})]})}function N(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}}}]);